---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { Image } from 'astro:assets';
import { Folder, ExternalLink, Github } from 'lucide-astro';
import { projects, getProjectsByStatus } from '../data/projects';

const completedProjects = getProjectsByStatus('completed');
const currentProjects = getProjectsByStatus('current');
const roadmapProjects = getProjectsByStatus('roadmap');
---

<Layout title="Projects - David Martin | DJM Tech" description="Explore my portfolio of web development projects, from completed applications to current work and future roadmap.">
  <Header />
  
  <!-- Hero Section -->
  <section class="relative hero-bg py-20 lg:py-32 overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-5xl font-bold hero-title mb-6">My Projects</h1>
        <p class="text-xl hero-subtitle max-w-3xl mx-auto">
          A collection of web applications, tools, and experiments that showcase my journey as a developer. 
          From completed projects to current work and future roadmap.
        </p>
      </div>
    </div>
    
    <!-- Background Elements -->
    <div class="absolute inset-0 hero-bg-elements">
      <div class="hero-bg-gradient"></div>
      <div class="hero-bg-pattern"></div>
    </div>
  </section>

  <!-- Project Filter Tabs -->
  <section class="py-8 section-bg border-b border-color">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-wrap justify-center gap-4">
        <button class="project-filter active px-6 py-2 rounded-lg font-medium transition-colors" data-filter="all">
          All Projects ({projects.length})
        </button>
        <button class="project-filter px-6 py-2 rounded-lg font-medium transition-colors" data-filter="completed">
          Completed ({completedProjects.length})
        </button>
        <button class="project-filter px-6 py-2 rounded-lg font-medium transition-colors" data-filter="current">
          Current ({currentProjects.length})
        </button>
        <button class="project-filter px-6 py-2 rounded-lg font-medium transition-colors" data-filter="roadmap">
          Roadmap ({roadmapProjects.length})
        </button>
      </div>
    </div>
  </section>

  <!-- Projects Grid -->
  <section class="py-20 projects-bg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="projects-grid">
        {projects.map((project) => (
          <div class={`project-card neon-card overflow-hidden hover:shadow-neon-glow transition-all duration-300 ${project.status}`}>
            <div class="h-48 project-image-bg flex items-center justify-center overflow-hidden">
              <Image 
                src={project.image} 
                alt={`${project.title} project screenshot`}
                width={400}
                height={192}
                class="w-full h-full object-cover"
              />
            </div>
            <div class="p-6">
              <div class="flex items-center justify-between mb-3">
                <h3 class="text-xl font-semibold project-title">{project.title}</h3>
                <span class={`px-3 py-1 text-xs font-medium rounded-full status-badge status-${project.status}`}>
                  {project.status}
                </span>
              </div>
              
              <p class="project-description mb-4">{project.description}</p>
              
              <div class="mb-4">
                <span class="text-sm font-medium project-label mb-2 block">Technologies:</span>
                <div class="flex flex-wrap gap-2">
                  {project.technologies.map((tech) => (
                    <span class="px-2 py-1 tech-tag text-xs rounded">{tech}</span>
                  ))}
                </div>
              </div>
              
              <div class="mb-4">
                <span class="text-sm font-medium project-label mb-2 block">Category:</span>
                <span class="px-2 py-1 category-tag text-xs rounded">{project.category}</span>
              </div>
              
              {project.longDescription && (
                <div class="mb-4">
                  <p class="text-sm project-description">{project.longDescription}</p>
                </div>
              )}
              
              <div class="flex flex-col sm:flex-row gap-3">
                {project.liveUrl && (
                  <a href={project.liveUrl} target="_blank" rel="noopener noreferrer" class="primary-cta-button flex items-center justify-center">
                    <ExternalLink class="h-4 w-4 mr-2" />
                    View Website
                  </a>
                )}
                {project.githubUrl && (
                  <a href={project.githubUrl} target="_blank" rel="noopener noreferrer" class="secondary-cta-button flex items-center justify-center">
                    <Github class="h-4 w-4 mr-2" />
                    GitHub
                  </a>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Project Status Legend -->
  <section class="py-12 section-bg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-8">
        <h2 class="text-2xl font-bold section-title mb-4">Project Status</h2>
        <p class="section-subtitle">Understanding the different stages of my projects</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="text-center">
          <div class="status-badge status-completed px-4 py-2 rounded-full inline-block mb-4">
            Completed
          </div>
          <p class="project-description">
            Fully developed and deployed projects that are live and functional.
          </p>
        </div>
        
        <div class="text-center">
          <div class="status-badge status-current px-4 py-2 rounded-full inline-block mb-4">
            Current
          </div>
          <p class="project-description">
            Projects I'm actively working on and developing right now.
          </p>
        </div>
        
        <div class="text-center">
          <div class="status-badge status-roadmap px-4 py-2 rounded-full inline-block mb-4">
            Roadmap
          </div>
          <p class="project-description">
            Future projects planned for development in the coming months.
          </p>
        </div>
      </div>
    </div>
  </section>

  <Footer />

  <script>
    // Project filtering functionality
    document.addEventListener('DOMContentLoaded', function() {
      const filterButtons = document.querySelectorAll('.project-filter');
      const projectCards = document.querySelectorAll('.project-card');
      
      filterButtons.forEach(button => {
        button.addEventListener('click', function(this: HTMLElement) {
          const filter = this.getAttribute('data-filter');
          
          // Update active button
          filterButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          
          // Filter projects
          projectCards.forEach(card => {
            if (filter === 'all' || (filter && card.classList.contains(filter!))) {
              (card as HTMLElement).style.display = 'block';
              (card as HTMLElement).style.animation = 'fadeIn 0.3s ease-in';
            } else {
              (card as HTMLElement).style.display = 'none';
            }
          });
        });
      });
    });
  </script>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .hero-bg {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      position: relative;
    }

    html.light .hero-bg {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .hero-bg-elements {
      pointer-events: none;
    }

    .hero-bg-gradient {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 30% 20%, rgba(0, 212, 255, 0.05) 0%, transparent 50%),
                  radial-gradient(circle at 70% 80%, rgba(0, 212, 255, 0.03) 0%, transparent 50%);
    }

    .hero-bg-pattern {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        radial-gradient(circle at 1px 1px, rgba(0, 212, 255, 0.08) 1px, transparent 0);
      background-size: 20px 20px;
      opacity: 0.2;
    }

    .hero-title {
      color: var(--text-primary);
    }

    html.light .hero-title {
      color: #0f172a;
      font-weight: 700;
    }

    .hero-subtitle {
      color: var(--text-secondary);
    }

    html.light .hero-subtitle {
      color: #475569;
      font-weight: 500;
    }

    .section-bg {
      background-color: var(--bg-secondary);
    }

    .section-title {
      color: var(--text-primary);
    }

    .section-subtitle {
      color: var(--text-secondary);
    }

    .projects-bg {
      background-color: var(--bg-primary);
    }

    .project-image-bg {
      background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
    }

    .project-icon {
      color: var(--accent-color);
    }

    .project-title {
      color: var(--text-primary);
    }

    .project-description {
      color: var(--text-secondary);
    }

    .project-label {
      color: var(--text-primary);
    }

    .status-badge {
      color: var(--text-primary);
      background-color: var(--bg-secondary);
      border: 1px solid var(--border-color);
    }

    .status-completed {
      background-color: rgba(34, 197, 94, 0.2);
      color: #22c55e;
      border-color: #22c55e;
    }

    .status-current {
      background-color: rgba(59, 130, 246, 0.2);
      color: #3b82f6;
      border-color: #3b82f6;
    }

    .status-roadmap {
      background-color: rgba(245, 158, 11, 0.2);
      color: #f59e0b;
      border-color: #f59e0b;
    }

    .tech-tag {
      background-color: var(--bg-secondary);
      color: var(--text-secondary);
      border: 1px solid var(--border-color);
    }

    .category-tag {
      background-color: rgba(0, 212, 255, 0.2);
      color: var(--accent-color);
      border: 1px solid var(--accent-color);
    }

    .project-link {
      color: var(--accent-color);
      font-weight: 500;
      transition: color 0.3s;
    }

    .project-link:hover {
      color: var(--accent-hover);
    }

    .project-filter {
      background-color: var(--bg-secondary);
      color: var(--text-secondary);
      border: 1px solid var(--border-color);
    }

    .project-filter:hover {
      background-color: var(--bg-card);
      color: var(--text-primary);
    }

    .project-filter.active {
      background-color: var(--accent-color);
      color: var(--bg-primary);
      border-color: var(--accent-color);
    }

    /* CTA Buttons */
    .primary-cta-button {
      background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
      color: #0a0a0a;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 212, 255, 0.3), 0 0 15px rgba(0, 212, 255, 0.2);
      border: none;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      pointer-events: auto;
      position: relative;
      z-index: 10;
    }
    
    .primary-cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 212, 255, 0.4), 0 0 20px rgba(0, 212, 255, 0.3);
      background: linear-gradient(135deg, #33dfff 0%, #00d4ff 100%);
    }
    
    .secondary-cta-button {
      background-color: transparent;
      color: #00d4ff;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      border: 2px solid #00d4ff;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 10px rgba(0, 212, 255, 0.2);
      cursor: pointer;
      pointer-events: auto;
      position: relative;
      z-index: 10;
    }
    
    .secondary-cta-button:hover {
      background-color: #00d4ff;
      color: #0a0a0a;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 212, 255, 0.3), 0 0 20px rgba(0, 212, 255, 0.2);
    }
    
    html.light .secondary-cta-button {
      color: #00d4ff;
      border-color: #00d4ff;
    }
    
    html.light .secondary-cta-button:hover {
      background-color: #00d4ff;
      color: #ffffff;
    }
  </style>
</Layout>
